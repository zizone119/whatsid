import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.Scanner;

public class BoardEx {

	private Scanner sc = new Scanner(System.in);
	private Connection conn;
	Statement stmt;
	PreparedStatement pstmt;
	ResultSet rs;
	public BoardEx() {
		try {
			Class.forName("com.mysql.cj.jdbc.Driver");
			String url="jdbc:mysql://localhost:3306/haksa";
			String id="root";
			String pw="1234";
			conn = DriverManager.getConnection(url,id,pw);
		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}
	
	public void list() {
		System.out.println("\n[게시판 목록]");
		System.out.println("---------------------------------------");
		System.out.printf("%-6s%-12s%-16s%-40s\n","no","writer","date","title");
		System.out.println("---------------------------------------");
		
		try {
			String sql =""+"select bno,btitle,bcontent,bwriter,bdate from boards order by bno desc";
			pstmt = conn.prepareStatement(sql);
			rs=pstmt.executeQuery();
			while(rs.next()) {
				Board board = new Board();
				board.setBno(rs.getInt("bno"));
				board.setBtitle(rs.getString("btitle"));
				board.setBcontent(rs.getString("bcontent"));
				board.setBwriter(rs.getString("bwriter"));
				board.setBdate(rs.getDate("bdate"));
				System.out.printf("%-6s%-12s%-16s%-40s\n",board.getBno(),board.getBtitle(),board.getBcontent(),board.getBdate());
			}
			rs.close();
			pstmt.close();
		}catch (Exception e) {
			e.printStackTrace();
		}
		mainMenu();
	}
	public void mainMenu() {
		System.out.println();
		System.out.println("---------------------------------------");
		System.out.println("메인메뉴 : 1.Create | 2. Read | 3.Clear | 4.종료");
		System.out.println("메뉴 선택 >>");
		String menuNo = sc.nextLine();
		System.out.println();
		switch(menuNo) {
		case "1" :
			create();
			break;
		case "2" :
			read();
			break;
		case "3" :
			clear();
			break;
		case "4" :
			exit();
		}
	}
	private void exit() {
		System.out.println("프로그램 종료");
	}

	private void clear() {
		System.out.println("레코드 삭제");
	}

	private void read() {
		System.out.println("레코드 검색");
	}

	public void create() {
		System.out.println("레코드 삽입");
	}
	public static void main(String[] args) {
		BoardEx b = new BoardEx();
		b.list();
	}
}
